(library
 (name bindoj_gen_test_gen_output_with_decl)
 (libraries alcotest
            bindoj_test_common_typedesc_examples
            bindoj_runtime bindoj_std kxclib yojson jsonm)
 (flags (:standard -open Bindoj_std)))

(rule
 (target ex01_gen.ml)
 (action (with-stdout-to %{target} (run %{exe:../gen.exe} %{target} -gen-type-decl)))
 (mode (promote (until-clean))))
(rule
 (target ex01_gen.mli)
 (action (with-stdout-to %{target} (run %{exe:../gen.exe} %{target} -gen-type-decl)))
 (mode (promote (until-clean))))

(rule
 (target ex01_inherited_mangling_gen.ml)
 (action (with-stdout-to %{target} (run %{exe:../gen.exe} %{target} -gen-type-decl)))
 (mode (promote (until-clean))))
(rule
 (target ex01_inherited_mangling_gen.mli)
 (action (with-stdout-to %{target} (run %{exe:../gen.exe} %{target} -gen-type-decl)))
 (mode (promote (until-clean))))

(rule
 (target ex02_gen.ml)
 (action (with-stdout-to %{target} (run %{exe:../gen.exe} %{target} -gen-type-decl)))
 (mode (promote (until-clean))))
(rule
 (target ex02_gen.mli)
 (action (with-stdout-to %{target} (run %{exe:../gen.exe} %{target} -gen-type-decl)))
 (mode (promote (until-clean))))

(rule
 (target ex02_reused_gen.ml)
 (action (with-stdout-to %{target} (run %{exe:../gen.exe} %{target} -gen-type-decl)))
 (mode (promote (until-clean))))
(rule
 (target ex02_reused_gen.mli)
 (action (with-stdout-to %{target} (run %{exe:../gen.exe} %{target} -gen-type-decl)))
 (mode (promote (until-clean))))

(rule
 (target ex02_no_mangling_gen.ml)
 (action (with-stdout-to %{target} (run %{exe:../gen.exe} %{target} -gen-type-decl)))
 (mode (promote (until-clean))))
(rule
 (target ex02_no_mangling_gen.mli)
 (action (with-stdout-to %{target} (run %{exe:../gen.exe} %{target} -gen-type-decl)))
 (mode (promote (until-clean))))

(rule
 (target ex02_inherited_mangling_gen.ml)
 (action (with-stdout-to %{target} (run %{exe:../gen.exe} %{target} -gen-type-decl)))
 (mode (promote (until-clean))))
(rule
 (target ex02_inherited_mangling_gen.mli)
 (action (with-stdout-to %{target} (run %{exe:../gen.exe} %{target} -gen-type-decl)))
 (mode (promote (until-clean))))

(rule
 (target ex03_gen.ml)
 (action (with-stdout-to %{target} (run %{exe:../gen.exe} %{target} -gen-type-decl)))
 (mode (promote (until-clean))))
(rule
 (target ex03_gen.mli)
 (action (with-stdout-to %{target} (run %{exe:../gen.exe} %{target} -gen-type-decl)))
 (mode (promote (until-clean))))

(rule
 (target ex03_objtuple_gen.ml)
 (action (with-stdout-to %{target} (run %{exe:../gen.exe} %{target} -gen-type-decl)))
 (mode (promote (until-clean))))
(rule
 (target ex03_objtuple_gen.mli)
 (action (with-stdout-to %{target} (run %{exe:../gen.exe} %{target} -gen-type-decl)))
 (mode (promote (until-clean))))

(rule
 (target ex04_gen.ml)
 (action (with-stdout-to %{target} (run %{exe:../gen.exe} %{target} -gen-type-decl)))
 (mode (promote (until-clean))))
(rule
 (target ex04_gen.mli)
 (action (with-stdout-to %{target} (run %{exe:../gen.exe} %{target} -gen-type-decl)))
 (mode (promote (until-clean))))

(rule
 (target ex05_gen.ml)
 (action (with-stdout-to %{target} (run %{exe:../gen.exe} %{target} -gen-type-decl)))
 (mode (promote (until-clean))))
(rule
 (target ex05_gen.mli)
 (action (with-stdout-to %{target} (run %{exe:../gen.exe} %{target} -gen-type-decl)))
 (mode (promote (until-clean))))

(rule
 (target ex05_notuple_gen.ml)
 (action (with-stdout-to %{target} (run %{exe:../gen.exe} %{target} -gen-type-decl)))
 (mode (promote (until-clean))))
(rule
 (target ex05_notuple_gen.mli)
 (action (with-stdout-to %{target} (run %{exe:../gen.exe} %{target} -gen-type-decl)))
 (mode (promote (until-clean))))

(rule
 (target ex06_gen.ml)
 (action (with-stdout-to %{target} (run %{exe:../gen.exe} %{target} -gen-type-decl)))
 (mode (promote (until-clean))))
(rule
 (target ex06_gen.mli)
 (action (with-stdout-to %{target} (run %{exe:../gen.exe} %{target} -gen-type-decl)))
 (mode (promote (until-clean))))

(rule
 (target ex07_gen.ml)
 (action (with-stdout-to %{target} (run %{exe:../gen.exe} %{target} -gen-type-decl)))
 (mode (promote (until-clean))))
(rule
 (target ex07_gen.mli)
 (action (with-stdout-to %{target} (run %{exe:../gen.exe} %{target} -gen-type-decl)))
 (mode (promote (until-clean))))

(rule
 (target ex08_gen.ml)
 (action (with-stdout-to %{target} (run %{exe:../gen.exe} %{target} -gen-type-decl)))
 (mode (promote (until-clean))))
(rule
 (target ex08_gen.mli)
 (action (with-stdout-to %{target} (run %{exe:../gen.exe} %{target} -gen-type-decl)))
 (mode (promote (until-clean))))

(rule
 (target ex09_gen.ml)
 (action (with-stdout-to %{target} (run %{exe:../gen.exe} %{target} -gen-type-decl)))
 (mode (promote (until-clean))))
(rule
 (target ex09_gen.mli)
 (action (with-stdout-to %{target} (run %{exe:../gen.exe} %{target} -gen-type-decl)))
 (mode (promote (until-clean))))

(rule
 (target ex10_gen.ml)
 (action (with-stdout-to %{target} (run %{exe:../gen.exe} %{target} -gen-type-decl)))
 (mode (promote (until-clean))))
(rule
 (target ex10_gen.mli)
 (action (with-stdout-to %{target} (run %{exe:../gen.exe} %{target} -gen-type-decl)))
 (mode (promote (until-clean))))

(rule
 (target ex11_gen.ml)
 (action (with-stdout-to %{target} (run %{exe:../gen.exe} %{target} -gen-type-decl)))
 (mode (promote (until-clean))))
(rule
 (target ex11_gen.mli)
 (action (with-stdout-to %{target} (run %{exe:../gen.exe} %{target} -gen-type-decl)))
 (mode (promote (until-clean))))

(rule
 (target ex12_gen.ml)
 (action (with-stdout-to %{target} (run %{exe:../gen.exe} %{target} -gen-type-decl)))
 (mode (promote (until-clean))))
(rule
 (target ex12_gen.mli)
 (action (with-stdout-to %{target} (run %{exe:../gen.exe} %{target} -gen-type-decl)))
 (mode (promote (until-clean))))

(rule
 (target ex13_gen.ml)
 (action (with-stdout-to %{target} (run %{exe:../gen.exe} %{target} -gen-type-decl)))
 (mode (promote (until-clean))))
(rule
 (target ex13_gen.mli)
 (action (with-stdout-to %{target} (run %{exe:../gen.exe} %{target} -gen-type-decl)))
 (mode (promote (until-clean))))
