(library
 (name bindoj_gen_test_gen_output_with_decl)
 (libraries alcotest
            bindoj_test_common_typedesc_examples
            bindoj_runtime kxclib yojson jsonm))

(rule
 (target ex01_gen.ml)
 (action (with-stdout-to %{target} (run %{exe:../gen.exe} %{target} -gen-type-decl)))
 (mode (promote (until-clean))))

(rule
 (target ex02_gen.ml)
 (action (with-stdout-to %{target} (run %{exe:../gen.exe} %{target} -gen-type-decl)))
 (mode (promote (until-clean))))

(rule
 (target ex03_gen.ml)
 (action (with-stdout-to %{target} (run %{exe:../gen.exe} %{target} -gen-type-decl)))
 (mode (promote (until-clean))))

(rule
 (target ex04_gen.ml)
 (action (with-stdout-to %{target} (run %{exe:../gen.exe} %{target} -gen-type-decl)))
 (mode (promote (until-clean))))

(rule
 (target ex05_gen.ml)
 (action (with-stdout-to %{target} (run %{exe:../gen.exe} %{target} -gen-type-decl)))
 (mode (promote (until-clean))))

(rule
 (target ex06_gen.ml)
 (action (with-stdout-to %{target} (run %{exe:../gen.exe} %{target} -gen-type-decl)))
 (mode (promote (until-clean))))

(rule
 (target ex07_gen.ml)
 (action (with-stdout-to %{target} (run %{exe:../gen.exe} %{target} -gen-type-decl)))
 (mode (promote (until-clean))))
