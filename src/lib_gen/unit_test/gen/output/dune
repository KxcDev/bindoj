(library
 (name bindoj_gen_test_gen_output)
 (libraries alcotest bindoj_runtime bindoj_std_runtime kxclib yojson jsonm)
 (preprocess (pps ppx_deriving.show))
 (flags (:standard -open Bindoj_std_runtime)))

(rule
 (target ex01_gen.ml)
 (action (with-stdout-to %{target} (run %{exe:../gen.exe} %{target})))
 (mode (promote (until-clean))))
(rule
 (target ex01_docstr_gen.ml)
 (action (with-stdout-to %{target} (run %{exe:../gen.exe} %{target})))
 (mode (promote (until-clean))))

(rule
 (target ex02_gen.ml)
 (action (with-stdout-to %{target} (run %{exe:../gen.exe} %{target})))
 (mode (promote (until-clean))))
(rule
 (target ex02_docstr_gen.ml)
 (action (with-stdout-to %{target} (run %{exe:../gen.exe} %{target})))
 (mode (promote (until-clean))))

(rule
 (target ex03_gen.ml)
 (action (with-stdout-to %{target} (run %{exe:../gen.exe} %{target})))
 (mode (promote (until-clean))))
(rule
 (target ex03_docstr_gen.ml)
 (action (with-stdout-to %{target} (run %{exe:../gen.exe} %{target})))
 (mode (promote (until-clean))))

(rule
 (target ex03_objtuple_gen.ml)
 (action (with-stdout-to %{target} (run %{exe:../gen.exe} %{target})))
 (mode (promote (until-clean))))
(rule
 (target ex03_objtuple_docstr_gen.ml)
 (action (with-stdout-to %{target} (run %{exe:../gen.exe} %{target})))
 (mode (promote (until-clean))))

(rule
 (target ex04_gen.ml)
 (action (with-stdout-to %{target} (run %{exe:../gen.exe} %{target})))
 (mode (promote (until-clean))))
(rule
 (target ex04_docstr_gen.ml)
 (action (with-stdout-to %{target} (run %{exe:../gen.exe} %{target})))
 (mode (promote (until-clean))))

(rule
 (target ex05_gen.ml)
 (action (with-stdout-to %{target} (run %{exe:../gen.exe} %{target})))
 (mode (promote (until-clean))))
(rule
 (target ex05_docstr_gen.ml)
 (action (with-stdout-to %{target} (run %{exe:../gen.exe} %{target})))
 (mode (promote (until-clean))))

(rule
 (target ex05_notuple_gen.ml)
 (action (with-stdout-to %{target} (run %{exe:../gen.exe} %{target})))
 (mode (promote (until-clean))))
(rule
 (target ex05_notuple_docstr_gen.ml)
 (action (with-stdout-to %{target} (run %{exe:../gen.exe} %{target})))
 (mode (promote (until-clean))))

(rule
 (target ex06_gen.ml)
 (action (with-stdout-to %{target} (run %{exe:../gen.exe} %{target})))
 (mode (promote (until-clean))))
(rule
 (target ex06_docstr_gen.ml)
 (action (with-stdout-to %{target} (run %{exe:../gen.exe} %{target})))
 (mode (promote (until-clean))))

(rule
 (target ex07_gen.ml)
 (action (with-stdout-to %{target} (run %{exe:../gen.exe} %{target})))
 (mode (promote (until-clean))))
(rule
 (target ex07_docstr_gen.ml)
 (action (with-stdout-to %{target} (run %{exe:../gen.exe} %{target})))
 (mode (promote (until-clean))))

(rule
 (target ex08_gen.ml)
 (action (with-stdout-to %{target} (run %{exe:../gen.exe} %{target})))
 (mode (promote (until-clean))))
(rule
 (target ex08_docstr_gen.ml)
 (action (with-stdout-to %{target} (run %{exe:../gen.exe} %{target})))
 (mode (promote (until-clean))))
